"use strict";(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?a(exports):typeof define==="function"&&define.amd?define(["exports"],a):(a((b.SchedulerMock={})))}(this,(function(ai){var o=false;var aq=0;var l=null;var aa=null;var E=-1;var i=null;var j=-1;var x=false;var a=false;var b=false;var k=false;function w(ar){l=ar}function ad(at,ar){aa=at;E=aq+ar}function g(){aa=null;E=-1}function Y(){if(j!==-1&&i!==null&&i.length>=j||k&&b){x=true;return true}return false}function C(){return aq}function an(){}function X(au){if(a){throw new Error("Already flushing work.")}if(l!==null){var ar=l;j=au;a=true;try{var at=true;do{at=ar(true,aq)}while(at&&!x);if(!at){l=null}}finally{j=-1;x=false;a=false}}}function ak(){if(a){throw new Error("Already flushing work.")}if(l!==null){var ar=l;k=true;b=false;a=true;try{var at=true;do{at=ar(true,aq)}while(at&&!x);if(!at){l=null}}finally{k=false;x=false;a=false}}}function q(){if(a){throw new Error("Already flushing work.")}if(l!==null){a=true;try{var ar=l(false,aq);if(!ar){l=null}}finally{a=false}}}function H(){if(a){throw new Error("Already flushing work.")}if(l!==null){var ar=l;a=true;try{var at=true;do{at=ar(true,aq)}while(at);if(!at){l=null}return true}finally{a=false}}else{return false}}function c(){if(i===null){return[]}var ar=i;i=null;return ar}function t(){if(i!==null){throw new Error("Log is not empty. Assert on the log of yielded values before flushing additional work.")}H();if(i!==null){throw new Error("While flushing work, something yielded a value. Use an assertion helper to assert on the log of yielded values, e.g. expect(Scheduler).toFlushAndYield([...])")}}function D(ar){if(i===null){i=[ar]}else{i.push(ar)}}function K(ar){aq+=ar;if(!a){if(aa!==null&&E<=aq){aa(aq);E=-1;aa=null}q()}}function J(){b=true}var Q=1;var ao=2;var W=3;var ac=4;var y=5;var v=1073741823;var V=-1;var s=250;var aj=5000;var ap=10000;var p=v;var n=null;var B=null;var m=false;var am=null;var e=W;var al=false;var L=false;var ah=false;function S(at,ar){return at(ar)}function A(at,ar){return at(ar)}function r(at,ar){return at(ar)}function N(at,ar){return at(ar)}function R(at,ar){return at(ar)}function U(at,ar){var aw=at.next;if(aw===at){n=null}else{if(at===n){n=aw}var ax=at.previous;ax.next=aw;aw.previous=ax}at.next=at.previous=null;var aD=at.callback;var aC=e;var aA=am;e=at.priorityLevel;am=at;var aF;try{var au=at.expirationTime<=ar;switch(e){case Q:aF=S(aD,au);break;case ao:aF=A(aD,au);break;case W:aF=r(aD,au);break;case ac:aF=N(aD,au);break;case y:aF=R(aD,au);break}}catch(aB){throw aB}finally{e=aC;am=aA}if(typeof aF==="function"){var az=at.expirationTime;var av=at;av.callback=aF;if(n===null){n=av.next=av.previous=av}else{var aG=null;var aE=n;do{if(az<=aE.expirationTime){aG=aE;break}aE=aE.next}while(aE!==n);if(aG===null){aG=n}else{if(aG===n){n=av}}var ay=aG.previous;ay.next=aG.previous=av;av.next=aG;av.previous=ay}}}function P(av){if(B!==null&&B.startTime<=av){do{var ar=B;var at=ar.next;if(ar===at){B=null}else{B=at;var au=ar.previous;au.next=at;at.previous=au}ar.next=ar.previous=null;h(ar,ar.expirationTime)}while(B!==null&&B.startTime<=av)}}function O(ar){ah=false;P(ar);if(!L){if(n!==null){L=true;w(M)}else{if(B!==null){ad(O,B.startTime-ar)}}}}function M(at,ar){if(o&&m){return}L=false;if(ah){ah=false;g()}var au=ar;P(au);al=true;try{if(!at){while(n!==null&&n.expirationTime<=au&&!(o&&m)){U(n,au);au=C();P(au)}}else{if(n!==null){do{U(n,au);au=C();P(au)}while(n!==null&&!Y()&&!(o&&m))}}if(n!==null){return true}else{if(B!==null){ad(O,B.startTime-au)}return false}}finally{al=false}}function G(ar,au){switch(ar){case Q:case ao:case W:case ac:case y:break;default:ar=W}var at=e;e=ar;try{return au()}finally{e=at}}function d(au){var ar;switch(e){case Q:case ao:case W:ar=W;break;default:ar=e;break}var at=e;e=ar;try{return au()}finally{e=at}}function u(at){var ar=e;return function(){var au=e;e=ar;try{return at.apply(this,arguments)}finally{e=au}}}function z(ar){switch(ar){case Q:return V;case ao:return s;case y:return p;case ac:return ap;case W:default:return aj}}function ab(ar,az,aA){var at=C();var au;var ay;if(typeof aA==="object"&&aA!==null){var av=aA.delay;if(typeof av==="number"&&av>0){au=at+av}else{au=at}ay=typeof aA.timeout==="number"?aA.timeout:z(ar)}else{ay=z(ar);au=at}var aw=au+ay;var ax={callback:az,priorityLevel:ar,startTime:au,expirationTime:aw,next:null,previous:null};if(au>at){ag(ax,au);if(n===null&&B===ax){if(ah){g()}else{ah=true}ad(O,au-at)}}else{h(ax,aw);if(!L&&!al){L=true;w(M)}}return ax}function h(ar,aw){if(n===null){n=ar.next=ar.previous=ar}else{var au=null;var at=n;do{if(aw<at.expirationTime){au=at;break}at=at.next}while(at!==n);if(au===null){au=n}else{if(au===n){n=ar}}var av=au.previous;av.next=au.previous=ar;ar.next=au;ar.previous=av}}function ag(ar,av){if(B===null){B=ar.next=ar.previous=ar}else{var au=null;var at=B;do{if(av<at.startTime){au=at;break}at=at.next}while(at!==B);if(au===null){au=B}else{if(au===B){B=ar}}var aw=au.previous;aw.next=au.previous=ar;ar.next=au;ar.previous=aw}}function Z(){m=true}function F(){m=false;if(!L&&!al){L=true;w(M)}}function T(){return n}function I(ar){var at=ar.next;if(at===null){return}if(ar===at){if(ar===n){n=null}else{if(ar===B){B=null}}}else{if(ar===n){n=at}else{if(ar===B){B=at}}var au=ar.previous;au.next=at;at.previous=au}ar.next=ar.previous=null}function af(){return e}function f(){var ar=C();P(ar);return am!==null&&n!==null&&n.startTime<=ar&&n.expirationTime<am.expirationTime||Y()}var ae=J;ai.unstable_flushAllWithoutAsserting=H;ai.unstable_flushNumberOfYields=X;ai.unstable_flushExpired=q;ai.unstable_clearYields=c;ai.unstable_flushUntilNextPaint=ak;ai.unstable_flushAll=t;ai.unstable_yieldValue=D;ai.unstable_advanceTime=K;ai.unstable_ImmediatePriority=Q;ai.unstable_UserBlockingPriority=ao;ai.unstable_NormalPriority=W;ai.unstable_IdlePriority=y;ai.unstable_LowPriority=ac;ai.unstable_runWithPriority=G;ai.unstable_next=d;ai.unstable_scheduleCallback=ab;ai.unstable_cancelCallback=I;ai.unstable_wrapCallback=u;ai.unstable_getCurrentPriorityLevel=af;ai.unstable_shouldYield=f;ai.unstable_requestPaint=ae;ai.unstable_continueExecution=F;ai.unstable_pauseExecution=Z;ai.unstable_getFirstCallbackNode=T;ai.unstable_now=C;ai.unstable_forceFrameRate=an;Object.defineProperty(ai,"__esModule",{value:true})})));