"use strict";var stream=require("stream");var util=require("util");var replace=require("./replace");var jsonExtRe=/\.json$/;module.exports=function(a){a=a||process.env;return function(d,b){if(jsonExtRe.test(d)){return stream.PassThrough()}var c=b?[a,b]:[a];return new LooseEnvify(c)}};function LooseEnvify(a){stream.Transform.call(this);this._data="";this._envs=a}util.inherits(LooseEnvify,stream.Transform);LooseEnvify.prototype._transform=function(c,b,a){this._data+=c;a()};LooseEnvify.prototype._flush=function(a){var b=replace(this._data,this._envs);this.push(b);a()};