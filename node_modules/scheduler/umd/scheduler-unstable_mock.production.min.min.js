"use strict";(function(b,a){"object"===typeof exports&&"undefined"!==typeof module?a(exports):"function"===typeof define&&define.amd?define(["exports"],a):a(b.SchedulerMock={})})(this,function(ab){function M(){return -1!==b&&null!==U&&U.length>=b||S&&R?K=!0:!1}function L(){if(V){throw Error("Already flushing work.")}if(null!==Z){V=!0;try{Z(!1,W)||(Z=null)}finally{V=!1}}}function J(){if(V){throw Error("Already flushing work.")}if(null!==Z){var e=Z;V=!0;try{var d=!0;do{d=e(!0,W)}while(d);d||(Z=null);return !0}finally{V=!1}}else{return !1}}function s(g,e){var r=g.next;if(r===g){aa=null}else{g===aa&&(aa=r);var q=g.previous;q.next=r;r.previous=q}g.next=g.previous=null;r=g.callback;q=Y;var n=o;Y=g.priorityLevel;o=g;try{var m=g.expirationTime<=e;switch(Y){case 1:var p=r(m);break;case 2:p=r(m);break;case 3:p=r(m);break;case 4:p=r(m);break;case 5:p=r(m)}}catch(l){throw l}finally{Y=q,o=n}if("function"===typeof p){if(e=g.expirationTime,g.callback=p,null===aa){aa=g.next=g.previous=g}else{p=null;m=aa;do{if(e<=m.expirationTime){p=m;break}m=m.next}while(m!==aa);null===p?p=aa:p===aa&&(aa=g);e=p.previous;e.next=p.previous=g;g.next=p;g.previous=e}}}function k(f){if(null!==X&&X.startTime<=f){do{var e=X,h=e.next;if(e===h){X=null}else{X=h;var g=e.previous;g.next=h;h.previous=g}e.next=e.previous=null;j(e,e.expirationTime)}while(null!==X&&X.startTime<=f)}}function O(d){c=!1;k(d);Q||(null!==aa?(Q=!0,Z=N):null!==X&&(d=X.startTime-d,T=O,P=W+d))}function N(e,d){Q=!1;c&&(c=!1,T=null,P=-1);k(d);a=!0;try{if(!e){for(;null!==aa&&aa.expirationTime<=d;){s(aa,d),d=W,k(d)}}else{if(null!==aa){do{s(aa,d),d=W,k(d)}while(null!==aa&&!M())}}if(null!==aa){return !0}if(null!==X){var f=X.startTime-d;T=O;P=W+f}return !1}finally{a=!1}}function i(d){switch(d){case 1:return -1;case 2:return 250;case 5:return 1073741823;case 4:return 10000;default:return 5000}}function j(f,e){if(null===aa){aa=f.next=f.previous=f}else{var h=null,g=aa;do{if(e<g.expirationTime){h=g;break}g=g.next}while(g!==aa);null===h?h=aa:h===aa&&(aa=f);e=h.previous;e.next=h.previous=f;f.next=h;f.previous=e}}var W=0,Z=null,T=null,P=-1,U=null,b=-1,K=!1,V=!1,R=!1,S=!1,aa=null,X=null,o=null,Y=3,a=!1,Q=!1,c=!1;ab.unstable_flushAllWithoutAsserting=J;ab.unstable_flushNumberOfYields=function(e){if(V){throw Error("Already flushing work.")}if(null!==Z){var d=Z;b=e;V=!0;try{e=!0;do{e=d(!0,W)}while(e&&!K);e||(Z=null)}finally{b=-1,V=K=!1}}};ab.unstable_flushExpired=L;ab.unstable_clearYields=function(){if(null===U){return[]}var d=U;U=null;return d};ab.unstable_flushUntilNextPaint=function(){if(V){throw Error("Already flushing work.")}if(null!==Z){var e=Z;S=!0;R=!1;V=!0;try{var d=!0;do{d=e(!0,W)}while(d&&!K);d||(Z=null)}finally{V=K=S=!1}}};ab.unstable_flushAll=function(){if(null!==U){throw Error("Log is not empty. Assert on the log of yielded values before flushing additional work.")}J();if(null!==U){throw Error("While flushing work, something yielded a value. Use an assertion helper to assert on the log of yielded values, e.g. expect(Scheduler).toFlushAndYield([...])")}};ab.unstable_yieldValue=function(d){null===U?U=[d]:U.push(d)};ab.unstable_advanceTime=function(d){W+=d;V||(null!==T&&P<=W&&(T(W),P=-1,T=null),L())};ab.unstable_ImmediatePriority=1;ab.unstable_UserBlockingPriority=2;ab.unstable_NormalPriority=3;ab.unstable_IdlePriority=5;ab.unstable_LowPriority=4;ab.unstable_runWithPriority=function(e,d){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var f=Y;Y=e;try{return d()}finally{Y=f}};ab.unstable_next=function(e){switch(Y){case 1:case 2:case 3:var d=3;break;default:d=Y}var f=Y;Y=d;try{return e()}finally{Y=f}};ab.unstable_scheduleCallback=function(f,e,n){var m=W;if("object"===typeof n&&null!==n){var l=n.delay;l="number"===typeof l&&0<l?m+l:m;n="number"===typeof n.timeout?n.timeout:i(f)}else{n=i(f),l=m}n=l+n;f={callback:e,priorityLevel:f,startTime:l,expirationTime:n,next:null,previous:null};if(l>m){n=l;if(null===X){X=f.next=f.previous=f}else{e=null;var h=X;do{if(n<h.startTime){e=h;break}h=h.next}while(h!==X);null===e?e=X:e===X&&(X=f);n=e.previous;n.next=e.previous=f;f.next=e;f.previous=n}null===aa&&X===f&&(c?(T=null,P=-1):c=!0,T=O,P=W+(l-m))}else{j(f,n),Q||a||(Q=!0,Z=N)}return f};ab.unstable_cancelCallback=function(e){var d=e.next;if(null!==d){if(e===d){e===aa?aa=null:e===X&&(X=null)}else{e===aa?aa=d:e===X&&(X=d);var f=e.previous;f.next=d;d.previous=f}e.next=e.previous=null}};ab.unstable_wrapCallback=function(e){var d=Y;return function(){var f=Y;Y=d;try{return e.apply(this,arguments)}finally{Y=f}}};ab.unstable_getCurrentPriorityLevel=function(){return Y};ab.unstable_shouldYield=function(){var d=W;k(d);return null!==o&&null!==aa&&aa.startTime<=d&&aa.expirationTime<o.expirationTime||M()};ab.unstable_requestPaint=function(){R=!0};ab.unstable_continueExecution=function(){Q||a||(Q=!0,Z=N)};ab.unstable_pauseExecution=function(){};ab.unstable_getFirstCallbackNode=function(){return aa};ab.unstable_now=function(){return W};ab.unstable_forceFrameRate=function(){};Object.defineProperty(ab,"__esModule",{value:!0})});